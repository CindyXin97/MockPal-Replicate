# MockPal 测试指南 🧪

本指南提供了全面的测试策略，帮助您系统地测试MockPal平台的各个功能模块。

## 🧹 数据库清理

在开始测试前，您可以使用以下命令清理测试数据：

```bash
# 基础清理（保留用户账户和资料）
npm run clear-data

# 清理用户资料
npm run clear-data -- --clear-profiles

# 完全清理（包括用户账户）
npm run clear-data -- --clear-users --reset-ids

# 自定义组合
npm run clear-data -- --clear-profiles --reset-ids
```

## 📋 测试清单

### 1. 🔐 用户认证测试

#### 1.1 注册登录流程
- [ ] **Google OAuth登录**
  - 测试Google账号登录
  - 验证用户信息正确导入
  - 检查首次登录自动创建profile

- [ ] **邮箱魔法链接登录**
  - 测试邮箱登录链接发送
  - 验证链接有效性和过期机制
  - 检查邮箱验证状态

- [ ] **邮箱密码登录**
  - 测试注册新账户流程
  - 验证密码强度要求
  - 测试登录验证

#### 1.2 会话管理
- [ ] 测试会话持久性
- [ ] 验证登出功能
- [ ] 检查会话过期处理

### 2. 👤 用户资料管理测试

#### 2.1 资料完善
- [ ] **基础信息填写**
  - 职位类型选择 (DA/DS/DE/BA)
  - 经验水平选择
  - 目标公司和行业

- [ ] **练习偏好设置**
  - 技术面试开关
  - 行为面试开关  
  - 案例分析开关
  - 统计问题开关

- [ ] **联系方式**
  - 邮箱自动填充
  - 微信号输入
  - LinkedIn链接输入

- [ ] **个人简介**
  - 字数限制测试
  - 特殊字符处理

#### 2.2 资料验证
- [ ] 必填字段验证
- [ ] 表单提交成功/失败处理
- [ ] 数据持久化验证

### 3. 🎯 匹配系统测试

#### 3.1 浏览候选人
- [ ] **匹配推荐算法**
  - 验证基于职位类型的匹配
  - 检查经验水平兼容性
  - 测试练习内容重叠度

- [ ] **每日浏览限制**
  - 验证每日5人限制
  - 测试限制重置机制
  - 检查已浏览用户排除

- [ ] **用户卡片展示**
  - 头像显示（Dicebear生成）
  - 基本信息完整性
  - 成就等级显示
  - 练习偏好标签

#### 3.2 匹配操作
- [ ] **喜欢/跳过功能**
  - 测试喜欢操作
  - 测试跳过操作
  - 验证操作记录

- [ ] **双向匹配**
  - 测试互相喜欢的匹配成功
  - 验证单向喜欢的pending状态

### 4. 🤝 成功匹配管理测试

#### 4.1 匹配列表
- [ ] **匹配信息展示**
  - 用户基本信息
  - 联系方式显示（邮箱、微信、LinkedIn）
  - 匹配时间显示
  - 成就等级展示

- [ ] **联系模板**
  - 微信联系模板生成
  - LinkedIn联系模板生成  
  - 邮箱联系模板生成
  - 模板个性化内容

#### 4.2 状态跟踪
- [ ] **联系状态**
  - "是否添加联系方式"选项
  - 状态保存和恢复

- [ ] **面试状态**  
  - "是否进行面试"选项
  - 条件显示逻辑

### 5. 📝 反馈系统测试

#### 5.1 反馈表单
- [ ] **表单交互**
  - 联系状态选择
  - 面试状态选择
  - 反馈内容输入

- [ ] **数据持久化**
  - localStorage自动保存
  - 页面刷新数据恢复
  - 多设备数据同步

#### 5.2 反馈提交
- [ ] **提交流程**
  - 表单验证
  - 提交成功处理
  - 错误处理和重试

- [ ] **提交后状态**
  - 卡片自动折叠
  - 已提交状态显示
  - 修改功能测试

#### 5.3 反馈管理
- [ ] **数据清理**
  - 提交成功后localStorage清理
  - 避免数据冲突

### 6. 🏆 成就系统测试

#### 6.1 等级计算
- [ ] **等级规则验证**
  - 新用户 (0次面试)
  - 面试新手 (1-4次)
  - 面试新星 (5-9次)
  - 面试达人 (10-14次)
  - 面试导师 (15次+)

- [ ] **经验值更新**
  - 完成面试获得经验
  - 等级提升通知

#### 6.2 成就显示
- [ ] 用户卡片中的等级图标
- [ ] 等级说明悬停提示
- [ ] 特殊标识（如月亮图标）

### 7. 📚 面试真题测试

#### 7.1 题目展示
- [ ] **分类筛选**
  - 公司筛选
  - 职位筛选
  - 题目类型筛选
  - 难度筛选

- [ ] **题目内容**
  - 题目描述完整性
  - 推荐答案显示
  - 来源和年份信息

#### 7.2 题目交互
- [ ] 收藏功能（如有）
- [ ] 搜索功能
- [ ] 分页或无限滚动

### 8. 🎨 用户界面测试

#### 8.1 响应式设计
- [ ] **移动端适配**
  - 手机竖屏显示
  - 手机横屏显示
  - 平板显示

- [ ] **桌面端**
  - 不同屏幕尺寸
  - 浏览器兼容性

#### 8.2 交互体验
- [ ] **加载状态**
  - 骨架屏显示
  - 加载动画
  - 错误状态处理

- [ ] **通知系统**
  - Toast消息显示
  - 成功/错误通知
  - 通知自动消失

### 9. ⚡ 性能测试

#### 9.1 页面性能
- [ ] **加载速度**
  - 首屏加载时间
  - 图片懒加载
  - 代码分割效果

- [ ] **数据查询**
  - 匹配查询性能
  - 分页加载效率
  - 缓存机制

#### 9.2 用户体验
- [ ] **操作响应**
  - 点击响应时间
  - 表单提交响应
  - 状态更新速度

### 10. 🔒 安全测试

#### 10.1 数据安全
- [ ] **用户数据保护**
  - 敏感信息加密
  - SQL注入防护
  - XSS攻击防护

- [ ] **认证安全**
  - 会话劫持防护
  - CSRF保护
  - 密码安全存储

#### 10.2 权限控制
- [ ] **页面访问控制**
  - 未登录用户重定向
  - 资料未完成用户限制
  - API接口权限验证

## 🛠️ 测试工具推荐

### 浏览器开发者工具
- **Network标签**: 监控API请求
- **Application标签**: 检查localStorage数据
- **Console标签**: 查看调试日志

### 测试数据准备
1. 创建多个测试账户（不同职位类型）
2. 填写完整的用户资料
3. 进行互相匹配操作
4. 提交不同类型的反馈

### 测试环境
- **本地开发**: http://localhost:3000
- **生产环境**: https://www.mockpals.com

## 📊 测试报告模板

### 功能测试报告
```
测试日期: [日期]
测试环境: [本地/生产]
测试人员: [姓名]

通过项目: [数量]
失败项目: [数量]
阻塞问题: [列表]

详细结果:
- [功能模块]: ✅/❌ [具体问题描述]
```

### 性能测试报告
```
页面加载时间:
- 首页: [时间]ms
- 匹配页: [时间]ms
- 资料页: [时间]ms

API响应时间:
- 获取匹配: [时间]ms
- 提交反馈: [时间]ms

资源使用:
- 内存占用: [数值]MB
- 网络传输: [数值]KB
```

## 🚀 自动化测试建议

### 单元测试
- 匹配算法逻辑测试
- 表单验证函数测试
- 工具函数测试

### 集成测试
- API端点测试
- 数据库操作测试
- 认证流程测试

### 端到端测试
- 用户注册到匹配完整流程
- 反馈提交完整流程
- 跨浏览器兼容性测试

---

**记住**: 测试不仅是发现bug，更是确保用户体验的关键步骤。每次测试都要站在真实用户的角度思考！🎯 